<!DOCTYPE html>
<html lang="ar" dir="rtl" id="mainHtml">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>MONOFLIX | BY BENSENOUCI MOUNDIR</title>
    <style>
        :root { --red: #e50914; --green: #28a745; --black: #050505; --dark-gray: #121212; }
        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Segoe UI', Tahoma, sans-serif; -webkit-tap-highlight-color: transparent; }
        body { background: var(--black); color: white; overflow-x: hidden; scroll-behavior: smooth; }
        header { position: fixed; top: 0; width: 100%; z-index: 1000; display: flex; justify-content: space-between; align-items: center; padding: 10px 5%; background: rgba(0,0,0,0.95); backdrop-filter: blur(15px); border-bottom: 1px solid #222; }
        .logo-box { display: flex; align-items: center; gap: 10px; cursor: pointer; }
        .logo-img { width: 35px; height: 35px; border-radius: 8px; box-shadow: 0 0 10px var(--red); }
        .brand-info h1 { color: var(--red); font-size: 16px; line-height: 1; }
        .brand-info span { font-size: 8px; color: #888; font-weight: bold; }
        .header-tools { display: flex; gap: 8px; align-items: center; }
        .lang-select { background: #111; color: white; border: 1px solid #333; padding: 5px; border-radius: 5px; font-size: 12px; cursor: pointer; }
        .search-box input { padding: 8px 12px; border-radius: 20px; border: 1px solid #333; background: #111; color: white; width: 120px; outline: none; transition: 0.3s; }
        .search-box input:focus { width: 180px; border-color: var(--red); }
        .nav-bar { margin-top: 75px; padding: 12px 5%; display: flex; gap: 10px; overflow-x: auto; scrollbar-width: none; }
        .btn-nav { padding: 8px 18px; background: #1a1a1a; border-radius: 20px; cursor: pointer; white-space: nowrap; border: 1px solid #333; color: white; font-size: 13px; font-weight: 500; }
        .btn-nav.active { background: var(--red); border-color: var(--red); }
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 15px; padding: 10px 5% 40px; }
        .card { cursor: pointer; border-radius: 10px; overflow: hidden; background: var(--dark-gray); transition: 0.3s; position: relative; border: 1px solid transparent; }
        .card img { width: 100%; height: 220px; object-fit: cover; }
        .card-info { padding: 8px; font-size: 11px; text-align: center; font-weight: bold; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .modal { position: fixed; top:0; left:0; width:100%; height:100%; background: rgba(0,0,0,0.98); display:none; z-index:2000; overflow-y: auto; }
        .info-content { max-width: 800px; margin: 20px auto; background: #111; border-radius: 15px; overflow: hidden; border: 1px solid #222; position: relative; }
        .close-btn { position: absolute; top: 15px; right: 15px; width: 35px; height: 35px; background: var(--red); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; z-index: 3001; }
        .info-header { display: flex; gap: 20px; padding: 20px; flex-wrap: wrap; }
        .info-poster { width: 180px; border-radius: 10px; margin: 0 auto; }
        .info-details { flex: 1; min-width: 250px; }
        .btn-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(50px, 1fr)); gap: 6px; max-height: 150px; overflow-y: auto; padding: 2px; }
        .btn-item { background: #222; border: 1px solid #333; color: white; padding: 6px; border-radius: 5px; cursor: pointer; text-align: center; font-size: 11px; }
        .btn-item.selected { background: var(--red); border-color: var(--red); }
        #videoLayer { position: fixed; top:0; left:0; width:100%; height:100%; background: #000; display:none; z-index:3000; flex-direction: column; }
        iframe { flex: 1; border: none; }
        .similar-section { padding: 20px; border-top: 1px solid #222; }
        .similar-grid { display: flex; gap: 10px; overflow-x: auto; padding-bottom: 10px; scrollbar-width: thin; }
        .similar-card { min-width: 100px; cursor: pointer; }
        .similar-card img { width: 100px; height: 150px; border-radius: 8px; object-fit: cover; }
        footer { padding: 25px; text-align: center; border-top: 1px solid #111; font-size: 14px; background: #080808; }
    </style>
</head>
<body oncontextmenu="return false;">

<header>
    <div class="logo-box" onclick="location.reload()">
        <img src="https://t3.ftcdn.net/jpg/05/90/75/40/360_F_590754013_9PdsotqXpLpIsYJ6atpZ6y9mZInI3T5C.jpg" class="logo-img">
        <div class="brand-info"><h1>MONOFLIX</h1><span>BY BENSENOUCI MOUNDIR</span></div>
    </div>
    <div class="header-tools">
        <select id="langToggle" class="lang-select" onchange="changeLanguage()"><option value="ar-SA">ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</option><option value="en-US">English</option></select>
        <div class="search-box"><input type="text" id="searchInput" placeholder="..."></div>
    </div>
</header>

<div class="nav-bar" id="mainNav">
    <div class="btn-nav active" data-id="trending" onclick="changeCategory('trending', event)">üî•</div>
    <div class="btn-nav" data-id="28" onclick="changeCategory(28, event)">Action</div>
    <div class="btn-nav" data-id="18" onclick="changeCategory(18, event)">Drama</div>
    <div class="btn-nav" data-id="35" onclick="changeCategory(35, event)">Comedy</div>
    <div class="btn-nav" data-id="27" onclick="changeCategory(27, event)">Horror</div>
    <div class="btn-nav" data-id="16" onclick="changeCategory(16, event)">Animation</div>
    <div class="btn-nav" onclick="showFavs(event)">‚ù§Ô∏è</div>
</div>

<div class="grid" id="mainGrid"></div>
<div id="sentinel"></div>

<div class="modal" id="infoModal">
    <div class="info-content">
        <span class="close-btn" onclick="closeModal('infoModal')">‚úï</span>
        <div class="info-header">
            <img id="modalPoster" class="info-poster">
            <div class="info-details">
                <h2 id="modalTitle"></h2>
                <p id="modalDesc" style="margin-top:10px; color:#bbb; font-size: 14px; line-height: 1.5;"></p>
                <div id="tvSelectors" style="display:none; margin-top: 15px;">
                    <div id="seasonsGrid" class="btn-grid"></div><br>
                    <div id="episodesGrid" class="btn-grid"></div>
                </div>
                <div style="display:flex; gap:10px; margin-top:20px;">
                    <button class="btn-nav active" style="flex:1.5; background: var(--red);" id="btnWatch" onclick="showPlayer()">‚ñ∂ ŸÖÿ¥ÿßŸáÿØÿ©</button>
                    <button class="btn-nav" style="flex:1; background: var(--green); border-color: var(--green);" id="btnDownload" onclick="openDownload()">‚¨áÔ∏è ÿ™ÿ≠ŸÖŸäŸÑ</button>
                    <button class="btn-nav" id="favBtn" onclick="toggleFav()">‚ù§Ô∏è</button>
                </div>
            </div>
        </div>
        <div class="similar-section">
            <h3 id="similarTitle" style="margin-bottom:10px; font-size:16px;">ŸÖÿ≠ÿ™ŸàŸâ ŸÖÿ¥ÿßÿ®Ÿá</h3>
            <div id="similarGrid" class="similar-grid"></div>
        </div>
    </div>
</div>

<div id="videoLayer"><span class="close-btn" onclick="closeModal('videoLayer')">‚úï</span><iframe id="mainIframe" allowfullscreen></iframe></div>

<footer>Developed by <span style="color:var(--red); font-weight:bold;">Bensenouci Moundir</span> ¬© 2026</footer>

<script>
const _0xV = ['e8f20f569c1aff29a0ca4df4294d8f68', 'monoflix_fav', 'ar-SA', 'trending', 'watchlist'];
const _0xkey = _0xV[0];
let currentLang = localStorage.getItem('monoflix_lang') || _0xV[2];
let watchlist = JSON.parse(localStorage.getItem(_0xV[1])) || [];
let currentItem = {}, currentPage = 1, currentGenre = _0xV[3], isFetching = false;
let selectedS = 1, selectedE = 1;

// ŸÖÿµŸÅŸàŸÅÿ© ÿßŸÑÿ™ÿ±ÿ¨ŸÖÿßÿ™
const translations = {
    'ar-SA': {
        '28': 'ÿ£ŸÉÿ¥ŸÜ', '18': 'ÿØÿ±ÿßŸÖÿß', '35': 'ŸÉŸàŸÖŸäÿØŸä', '27': 'ÿ±ÿπÿ®', '16': 'ÿ£ŸÜŸäŸÖŸäÿ¥ŸÜ',
        'search': 'ÿßÿ®ÿ≠ÿ´ ŸáŸÜÿß...', 'watch': '‚ñ∂ ŸÖÿ¥ÿßŸáÿØÿ©', 'download': '‚¨áÔ∏è ÿ™ÿ≠ŸÖŸäŸÑ', 'similar': 'ŸÖÿ≠ÿ™ŸàŸâ ŸÖÿ¥ÿßÿ®Ÿá'
    },
    'en-US': {
        '28': 'Action', '18': 'Drama', '35': 'Comedy', '27': 'Horror', '16': 'Animation',
        'search': 'Search...', 'watch': '‚ñ∂ Watch Now', 'download': '‚¨áÔ∏è Download', 'similar': 'Similar Content'
    }
};

function updateUI() {
    const isAr = currentLang === _0xV[2];
    const langData = translations[currentLang];
    
    document.getElementById('mainHtml').dir = isAr ? 'rtl' : 'ltr';
    document.getElementById('langToggle').value = currentLang;
    
    // ÿ™ÿ±ÿ¨ŸÖÿ© ÿ£ÿ≤ÿ±ÿßÿ± ÿßŸÑÿ™ŸÜŸÇŸÑ (ÿßŸÑÿ£ŸÇÿ≥ÿßŸÖ)
    document.querySelectorAll('.nav-bar .btn-nav[data-id]').forEach(btn => {
        const id = btn.getAttribute('data-id');
        if(id !== 'trending') btn.innerText = langData[id];
    });

    document.getElementById('searchInput').placeholder = langData['search'];
    document.getElementById('btnWatch').innerText = langData['watch'];
    document.getElementById('btnDownload').innerText = langData['download'];
    document.getElementById('similarTitle').innerText = langData['similar'];
}

window.onload = () => { updateUI(); loadMovies(); setupInfiniteScroll(); };

async function loadMovies(append = false) {
    if (isFetching || currentGenre === _0xV[4]) return;
    isFetching = true;
    let url = `https://api.themoviedb.org/3/trending/all/week?api_key=${_0xkey}&language=${currentLang}&page=${currentPage}`;
    if(currentGenre !== _0xV[3]) {
        url = `https://api.themoviedb.org/3/discover/movie?api_key=${_0xkey}&with_genres=${currentGenre}&language=${currentLang}&page=${currentPage}`;
    }
    try { const r = await fetch(url); const d = await r.json(); render(d.results, append); } catch(e) {}
    isFetching = false;
}

function render(list, append = false) {
    const html = list.filter(i=>i.poster_path).map(i => `
        <div class="card" onclick='showDetails(${JSON.stringify(i).replace(/'/g, "&apos;")})'>
            <img src="https://image.tmdb.org/t/p/w342${i.poster_path}" loading="lazy">
            <div class="card-info">${i.title || i.name}</div>
        </div>`).join('');
    const grid = document.getElementById('mainGrid');
    grid.innerHTML = append ? grid.innerHTML + html : html;
}

async function showDetails(item) {
    currentItem = item;
    document.getElementById('modalPoster').src = 'https://image.tmdb.org/t/p/w500' + item.poster_path;
    document.getElementById('modalTitle').innerText = item.title || item.name;
    document.getElementById('modalDesc').innerText = item.overview || "...";
    document.getElementById('infoModal').style.display = 'block';
    
    const isFav = watchlist.some(f => f.id === item.id);
    document.getElementById('favBtn').innerText = isFav ? "‚úÖ" : "‚ù§Ô∏è";

    if(!item.title) { 
        document.getElementById('tvSelectors').style.display = 'block'; 
        loadSeasons(item.id); 
        loadSimilar('tv', item.id);
    } else { 
        document.getElementById('tvSelectors').style.display = 'none'; 
        loadSimilar('movie', item.id);
    }
}

async function loadSimilar(type, id) {
    try {
        const r = await fetch(`https://api.themoviedb.org/3/${type}/${id}/similar?api_key=${_0xkey}&language=${currentLang}`);
        const d = await r.json();
        document.getElementById('similarGrid').innerHTML = d.results.filter(i=>i.poster_path).map(i => `
            <div class="similar-card" onclick='showDetails(${JSON.stringify(i).replace(/'/g, "&apos;")})'>
                <img src="https://image.tmdb.org/t/p/w185${i.poster_path}">
            </div>`).join('');
    } catch(e) { document.getElementById('similarGrid').innerHTML = ''; }
}

function toggleFav() {
    const idx = watchlist.findIndex(f => f.id === currentItem.id);
    if(idx === -1) { watchlist.push(currentItem); document.getElementById('favBtn').innerText = "‚úÖ"; }
    else { watchlist.splice(idx, 1); document.getElementById('favBtn').innerText = "‚ù§Ô∏è"; }
    localStorage.setItem(_0xV[1], JSON.stringify(watchlist));
    if(currentGenre === _0xV[4]) render(watchlist, false);
}

function showFavs(e) {
    currentGenre = _0xV[4];
    document.querySelectorAll('.btn-nav').forEach(b => b.classList.remove('active'));
    e.target.classList.add('active');
    render(watchlist, false);
}

async function loadSeasons(id) {
    const r = await fetch(`https://api.themoviedb.org/3/tv/${id}?api_key=${_0xkey}&language=${currentLang}`);
    const d = await r.json();
    document.getElementById('seasonsGrid').innerHTML = d.seasons.filter(s=>s.season_number > 0).map(s => `
        <div class="btn-item ${s.season_number==1?'selected':''}" onclick="selectS(${s.season_number}, this)">S${s.season_number}</div>`).join('');
    selectS(1);
}

function selectS(num, el) {
    selectedS = num;
    if(el) { document.querySelectorAll('#seasonsGrid .btn-item').forEach(b => b.classList.remove('selected')); el.classList.add('selected'); }
    fetch(`https://api.themoviedb.org/3/tv/${currentItem.id}/season/${num}?api_key=${_0xkey}&language=${currentLang}`)
    .then(r=>r.json()).then(d => {
        document.getElementById('episodesGrid').innerHTML = d.episodes.map(e => `<div class="btn-item ${e.episode_number==1?'selected':''}" onclick="selectE(${e.episode_number}, this)">E${e.episode_number}</div>`).join('');
    });
}

function selectE(num, el) {
    selectedE = num;
    document.querySelectorAll('#episodesGrid .btn-item').forEach(b => b.classList.remove('selected'));
    el.classList.add('selected');
}

function openDownload() {
    const n = currentItem.title || currentItem.name;
    window.open(`https://www.google.com/search?q=Download+${encodeURIComponent(n)}+4k+1080p`, '_blank');
}

function changeCategory(g, e) {
    currentGenre = g; currentPage = 1;
    document.querySelectorAll('.btn-nav').forEach(b => b.classList.remove('active'));
    if(e) e.target.classList.add('active');
    loadMovies(); window.scrollTo(0,0);
}

function changeLanguage() {
    currentLang = document.getElementById('langToggle').value;
    localStorage.setItem('monoflix_lang', currentLang);
    updateUI(); currentPage = 1; loadMovies(false);
}

function showPlayer() {
    const t = currentItem.title ? 'movie' : 'tv';
    let u = `https://vidsrc.me/embed/${t}?tmdb=${currentItem.id}`;
    if(t === 'tv') u += `&season=${selectedS}&episode=${selectedE}`;
    document.getElementById('mainIframe').src = u;
    document.getElementById('videoLayer').style.display = 'flex';
}

function closeModal(id) {
    document.getElementById(id).style.display = 'none';
    if(id==='videoLayer') document.getElementById('mainIframe').src = '';
}

function setupInfiniteScroll() {
    const obs = new IntersectionObserver(ent => {
        if(ent[0].isIntersecting && !isFetching && currentGenre !== _0xV[4]) { currentPage++; loadMovies(true); }
    });
    obs.observe(document.getElementById('sentinel'));
}

document.getElementById('searchInput').oninput = async (e) => {
    const q = e.target.value;
    if(q.length < 3) return;
    const r = await fetch(`https://api.themoviedb.org/3/search/multi?api_key=${_0xkey}&language=${currentLang}&query=${encodeURIComponent(q)}`);
    const d = await r.json(); render(d.results, false);
};

document.onkeydown = (e) => { if(e.keyCode == 123 || (e.ctrlKey && e.shiftKey && e.keyCode == 73)) return false; };
</script>
</body>
</html>